\newcommand\@avsum[2]{%
  {\sbox0{$\m@th#1\sum$}%
      \vphantom{\usebox0}%
      \ooalign{%
        \hidewidth
        \smash{\vrule height\dimexpr\ht0+1pt\relax depth\dimexpr\dp0+1pt\relax}%
        \hidewidth\cr
        $\m@th#1\sum$\cr
      }%
    }%
}
\newcommand{\avsum}{\mathop{\mathpalette\@avsum\relax}\displaylimits}
\newcommand\@avprod[2]{%
  {\sbox0{$\m@th#1\prod$}%
      \vphantom{\usebox0}%
      \ooalign{%
        \hidewidth
        \smash{\kern-.4pt\vrule height\dimexpr\ht0+1pt\relax depth\dimexpr\dp0+1pt\relax}%
        \hidewidth\cr
        $\m@th#1\prod\nolimits^{\mathrlap{#2}}$\cr
      }%
    }%
}

\NewDocumentCommand{\avprod}{O{}e{^_}}{\mathop{\mathpalette\@avprod\relax}\displaylimits^{\IfNoValueTF{#2}{}{#2}}_{\IfNoValueTF{#3}{}{#3}}}
\newcommand{\avPi}{\mathord{\mathpalette\@avPi\relax}}
\newcommand{\DecSigma}{\mathord{\text{\concrete Î£}}}
\newcommand{\@avL}[2]{%
  \mathchoice{\mathop{\ooalign{{$\m@th#1\mkern.5mu\mbox{\bfseries\raisebox{-.2ex}{\scalebox{.5}[1.5]{{\rule[.6ex]{1.7ex}{.25pt}}}}}$}\cr {$\m@th#1\L$}\cr}}\mathopen{}}
  {\mathop{\ooalign{{$\m@th#1\mkern.6mu\mbox{\bfseries\raisebox{-.2ex}{\scalebox{.5}[1.5]{{\rule[.6ex]{1.7ex}{.25pt}}}}}$}\cr {$\m@th#1\L$}\cr}}\mathopen{}}
  {\ooalign{{$\m@th#1\mkern.9mu\mbox{\bfseries\scalebox{.34}[1]{\raisebox{-.2ex}{\rule[.6ex]{1.7ex}{.25pt}}}}$}\cr {$\m@th#1\L$}\cr}}
  {\ooalign{{$\m@th#1\mkern2mu\mbox{\bfseries\scalebox{.4}[1]{{\rule[.6ex]{1.7ex}{.2pt}}}}$}\cr {$\m@th#1\L$}\cr}}%
}
\newcommand{\@@avL}{\mathpalette\@avL\relax}
\NewDocumentCommand{\avL}{e{^_}}{
  \IfNoValueTF{#1}{
  \IfNoValueTF{#2}{\mathop{\@@avL}\nolimits\mathopen{}}{\mathop{\@@avL}\nolimits_{#2}\mathopen{}}
  }{
  \IfNoValueTF{#2}{\mathop{\@@avL}\nolimits^{\!#1}_{\rule{0pt}{1ex}}\mathopen{}}{\mathop{\@@avL}\nolimits^{\!#1}_{#2}\mathopen{}}
  }
}
\newcommand{\@avell}[2]{%
  \ooalign{{$\m@th#1\mbox{\bfseries\scalebox{.52}[1]{\raisebox{.8pt}{\rule[.6ex]{2ex}{.2pt}}}}$}\cr {$\m@th#1 \mathfrak{l}$}\cr}}
\newcommand{\avell}{\mathpalette\@avell\relax}
\newcommand{\@avD}{%
  \ooalign{{$\mathrm{D}$}\cr \hidewidth\raise.2ex\hbox{$\vert$}\hidewidth\cr}}
\newcommand{\avDec}{\mathbb{D}\mathrm{ec}}

\let\Lorig\L
\let\L\relax
\NewDocumentCommand{\L}{e{^_}}{
  \ifmmode
    \IfNoValueTF{#1}{
    \IfNoValueTF{#2}{\mathop{\textup{L}}\nolimits\mathopen{}}{\mathop{\textup{L}}\nolimits_{#2}\mathopen{}}
  }{
    \IfNoValueTF{#2}{\mathop{\textup{L}}\nolimits^{\!#1}_{\rule{0pt}{1ex}}\mathopen{}}{\mathop{\textup{L}}\nolimits^{\!#1}_{#2}\mathopen{}}
  }\else\Lorig\fi
}
\renewcommand{\l}[1][black]{\mkern-1.6mu\mathop{\pmslant[-0.166]{{\color{#1}\ell}}}\mathopen{}}
